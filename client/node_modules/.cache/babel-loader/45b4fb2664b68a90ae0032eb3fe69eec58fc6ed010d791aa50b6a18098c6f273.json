{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import'./Cart.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const[cart,setCart]=useState({items:[]});const[loading,setLoading]=useState(true);useEffect(()=>{fetchCart();},[]);const fetchCart=async()=>{const token=localStorage.getItem('token');if(token){// Authenticated user: fetch from backend\ntry{const res=await axios.get('http://localhost:5000/api/cart',{headers:{Authorization:\"Bearer \".concat(token)}});setCart(res.data);}catch(err){console.error(err);}}else{// Guest user: load from localStorage\nconst guestCart=JSON.parse(localStorage.getItem('guestCart'))||{items:[]};setCart(guestCart);}setLoading(false);};const updateQuantity=async(itemId,quantity)=>{const token=localStorage.getItem('token');try{await axios.put(\"http://localhost:5000/api/cart/update/\".concat(itemId),{quantity},{headers:{Authorization:\"Bearer \".concat(token)}});fetchCart();}catch(err){console.error(err);}};const removeItem=async itemId=>{const token=localStorage.getItem('token');try{await axios.delete(\"http://localhost:5000/api/cart/remove/\".concat(itemId),{headers:{Authorization:\"Bearer \".concat(token)}});fetchCart();}catch(err){console.error(err);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(!cart||cart.items.length===0)return/*#__PURE__*/_jsx(\"div\",{children:\"Your cart is empty\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-items\",children:cart.items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.product.image,alt:item.product.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:item.product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",item.product.price]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.quantity,onChange:e=>updateQuantity(item._id,parseInt(e.target.value)),min:\"1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeItem(item._id),children:\"Remove\"})]})]},item._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: $\",cart.items.reduce((total,item)=>total+item.product.price*item.quantity,0)]}),/*#__PURE__*/_jsx(Link,{to:\"/checkout\",className:\"btn-primary\",children:\"Checkout\"})]})]});};export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","jsx","_jsx","jsxs","_jsxs","Cart","cart","setCart","items","loading","setLoading","fetchCart","token","localStorage","getItem","res","get","headers","Authorization","concat","data","err","console","error","guestCart","JSON","parse","updateQuantity","itemId","quantity","put","removeItem","delete","children","length","className","map","item","src","product","image","alt","name","price","type","value","onChange","e","_id","parseInt","target","min","onClick","reduce","total","to"],"sources":["C:/Users/HP/Desktop/pet-ecommerce/client/src/components/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Cart.css';\r\n\r\nconst Cart = () => {\r\n  const [cart, setCart] = useState({ items: [] });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const fetchCart = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      // Authenticated user: fetch from backend\r\n      try {\r\n        const res = await axios.get('http://localhost:5000/api/cart', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setCart(res.data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    } else {\r\n      // Guest user: load from localStorage\r\n      const guestCart = JSON.parse(localStorage.getItem('guestCart')) || { items: [] };\r\n      setCart(guestCart);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const updateQuantity = async (itemId, quantity) => {\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      await axios.put(`http://localhost:5000/api/cart/update/${itemId}`, \r\n        { quantity },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      fetchCart();\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const removeItem = async (itemId) => {\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/cart/remove/${itemId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      fetchCart();\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (!cart || cart.items.length === 0) return <div>Your cart is empty</div>;\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <h2>Shopping Cart</h2>\r\n      <div className=\"cart-items\">\r\n        {cart.items.map(item => (\r\n          <div key={item._id} className=\"cart-item\">\r\n            <img src={item.product.image} alt={item.product.name} />\r\n            <div>\r\n              <h3>{item.product.name}</h3>\r\n              <p>${item.product.price}</p>\r\n              <input\r\n                type=\"number\"\r\n                value={item.quantity}\r\n                onChange={(e) => updateQuantity(item._id, parseInt(e.target.value))}\r\n                min=\"1\"\r\n              />\r\n              <button onClick={() => removeItem(item._id)}>Remove</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"cart-total\">\r\n        <p>Total: ${cart.items.reduce((total, item) => total + item.product.price * item.quantity, 0)}</p>\r\n        <Link to=\"/checkout\" className=\"btn-primary\">Checkout</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}