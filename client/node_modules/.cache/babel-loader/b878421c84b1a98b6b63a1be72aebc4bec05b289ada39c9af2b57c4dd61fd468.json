{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/pet-ecommerce/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import'./Checkout.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Checkout=()=>{const[cart,setCart]=useState(null);const[shippingInfo,setShippingInfo]=useState({address:'',city:'',zipCode:'',country:''});const[loading,setLoading]=useState(true);useEffect(()=>{fetchCart();},[]);const fetchCart=async()=>{const token=localStorage.getItem('token');if(!token){setLoading(false);return;}try{const res=await axios.get('http://localhost:5000/api/cart',{headers:{Authorization:\"Bearer \".concat(token)}});setCart(res.data);setLoading(false);}catch(err){console.error(err);setLoading(false);}};const handleShippingChange=e=>{setShippingInfo(_objectSpread(_objectSpread({},shippingInfo),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();const token=localStorage.getItem('token');try{await axios.post('http://localhost:5000/api/checkout',shippingInfo,{headers:{Authorization:\"Bearer \".concat(token)}});alert('Order placed successfully!');window.location.href='/';}catch(err){console.error(err);alert('Checkout failed');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(!cart||cart.items.length===0)return/*#__PURE__*/_jsx(\"div\",{children:\"Your cart is empty\"});const total=cart.items.reduce((sum,item)=>sum+item.product.price*item.quantity,0);return/*#__PURE__*/_jsxs(\"div\",{className:\"checkout\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Order Summary\"}),cart.items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.product.name,\" x \",item.quantity]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",item.product.price*item.quantity]})]},item._id)),/*#__PURE__*/_jsx(\"div\",{className:\"summary-total\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total: $\",total]})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"shipping-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shipping Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:shippingInfo.address,onChange:handleShippingChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"City:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",value:shippingInfo.city,onChange:handleShippingChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Zip Code:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"zipCode\",value:shippingInfo.zipCode,onChange:handleShippingChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Country:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"country\",value:shippingInfo.country,onChange:handleShippingChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"Place Order\"})]})]})]});};export default Checkout;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Checkout","cart","setCart","shippingInfo","setShippingInfo","address","city","zipCode","country","loading","setLoading","fetchCart","token","localStorage","getItem","res","get","headers","Authorization","concat","data","err","console","error","handleShippingChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","post","alert","window","location","href","children","items","length","total","reduce","sum","item","product","price","quantity","className","map","_id","onSubmit","type","onChange","required"],"sources":["C:/Users/HP/Desktop/pet-ecommerce/client/src/components/Checkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './Checkout.css';\r\n\r\nconst Checkout = () => {\r\n  const [cart, setCart] = useState(null);\r\n  const [shippingInfo, setShippingInfo] = useState({\r\n    address: '',\r\n    city: '',\r\n    zipCode: '',\r\n    country: ''\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const fetchCart = async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/cart', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setCart(res.data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleShippingChange = (e) => {\r\n    setShippingInfo({ ...shippingInfo, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem('token');\r\n\r\n    try {\r\n      await axios.post('http://localhost:5000/api/checkout', shippingInfo, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      alert('Order placed successfully!');\r\n      window.location.href = '/';\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Checkout failed');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (!cart || cart.items.length === 0) return <div>Your cart is empty</div>;\r\n\r\n  const total = cart.items.reduce((sum, item) => sum + item.product.price * item.quantity, 0);\r\n\r\n  return (\r\n    <div className=\"checkout\">\r\n      <h2>Checkout</h2>\r\n      <div className=\"checkout-content\">\r\n        <div className=\"order-summary\">\r\n          <h3>Order Summary</h3>\r\n          {cart.items.map(item => (\r\n            <div key={item._id} className=\"summary-item\">\r\n              <span>{item.product.name} x {item.quantity}</span>\r\n              <span>${item.product.price * item.quantity}</span>\r\n            </div>\r\n          ))}\r\n          <div className=\"summary-total\">\r\n            <strong>Total: ${total}</strong>\r\n          </div>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"shipping-form\">\r\n          <h3>Shipping Information</h3>\r\n          <div className=\"form-group\">\r\n            <label>Address:</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"address\"\r\n              value={shippingInfo.address}\r\n              onChange={handleShippingChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>City:</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"city\"\r\n              value={shippingInfo.city}\r\n              onChange={handleShippingChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Zip Code:</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"zipCode\"\r\n              value={shippingInfo.zipCode}\r\n              onChange={handleShippingChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Country:</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"country\"\r\n              value={shippingInfo.country}\r\n              onChange={handleShippingChange}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn-primary\">Place Order</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}